<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
  <style>
    body { font-size: 22px; font-family: Arial, sans-serif; background: linear-gradient(to bottom, #f0f8ff, #e0f0ff); padding: 20px; }
    input, select, button { font-size: 20px; padding: 6px 10px; margin: 5px 0; }
    button { cursor: pointer; }
  </style>
</head>
<body>
  <h2>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ù†Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ÙŠÙ†</h2>
  <label>ğŸ§â€â™‚ï¸ Ø§Ø³Ù… Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹:</label><br>
  <input id="name" type="text"><br><br>

  <label>ğŸ†” Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©:</label><br>
  <input id="id" type="text" maxlength="10"><br><br>

  <label>ğŸ¥ Ø±Ù‚Ù… Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©:</label><br>
  <select id="clinic">
    <option value="1">Ø¹ÙŠØ§Ø¯Ø© 1</option>
    <option value="2">Ø¹ÙŠØ§Ø¯Ø© 2</option>
    <option value="3">Ø¹ÙŠØ§Ø¯Ø© 3</option>
    <option value="4">Ø¹ÙŠØ§Ø¯Ø© 4</option>
    <option value="5">Ø¹ÙŠØ§Ø¯Ø© 5</option>
  </select><br><br>

  <label>ğŸ“… Ø§Ù„Ø­Ø§Ù„Ø©:</label><br>
  <select id="status">
    <option value="Ø¨Ù…ÙˆØ¹Ø¯">Ø¨Ù…ÙˆØ¹Ø¯</option>
    <option value="Ø¨Ø¯ÙˆÙ† Ù…ÙˆØ¹Ø¯">Ø¨Ø¯ÙˆÙ† Ù…ÙˆØ¹Ø¯</option>
  </select><br><br>

  <button onclick="callNow()">ğŸ”˜ Ù†Ø¯Ø§Ø¡</button>
  <button onclick="recall()">ğŸ” Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù†Ø¯Ø§Ø¡</button>

  <script>
    const channel = new BroadcastChannel("clinicChannel");
    let lastData = null;

    function callNow() {
      const name = document.getElementById("name").value.trim();
      const id = document.getElementById("id").value.trim();
      const clinic = document.getElementById("clinic").value;
      const status = document.getElementById("status").value;

      if (!name || !/^[\u0600-\u06FFa-zA-Z\s]+$/.test(name)) return alert("Ø§Ù„Ø§Ø³Ù… ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨Ø§Ù„Ø­Ø±ÙˆÙ ÙÙ‚Ø·");
      if (!/^[0-9]{10}$/.test(id)) return alert("Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 10 Ø£Ø±Ù‚Ø§Ù…");

      const data = { name, id, clinic, status };
      lastData = data;
      channel.postMessage(data);
    }

    function recall() {
      if (lastData) {
        channel.postMessage(lastData);
      } else {
        alert("Ù„Ù… ÙŠØªÙ… Ù†Ø¯Ø§Ø¡ Ø£ÙŠ Ø§Ø³Ù… Ø¨Ø¹Ø¯");
      }
    }
  </script>
</body>
</html>
